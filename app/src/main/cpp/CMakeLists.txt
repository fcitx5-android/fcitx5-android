cmake_minimum_required(VERSION 3.18)

project(fcitx-lib)


add_subdirectory(fmt)

add_subdirectory(libintl-lite)
add_library(LibIntl::LibIntl ALIAS intl)
target_include_directories(intl PUBLIC
        $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/libintl-lite>)

cmake_policy(SET CMP0077 NEW)
option(EVENT__DISABLE_DEBUG_MODE "" ON)
option(EVENT__ENABLE_VERBOSE_DEBUG "" OFF)
option(EVENT__DISABLE_THREAD_SUPPORT "" ON)
option(EVENT__DISABLE_OPENSSL "" ON)
option(EVENT__DISABLE_MBEDTLS "" ON)
option(EVENT__DISABLE_BENCHMARK "" ON)
option(EVENT__DISABLE_TESTS "" ON)
option(EVENT__DISABLE_REGRESS "" ON)
option(EVENT__DISABLE_SAMPLES "" ON)
add_subdirectory(libevent)
add_library(libevent::core ALIAS event_core)

option(ENABLE_TEST "" OFF)
option(ENABLE_COVERAGE "" OFF)
option(ENABLE_ENCHANT "" OFF)
option(ENABLE_X11 "" OFF)
option(ENABLE_WAYLAND "" OFF)
option(ENABLE_DBUS "" OFF)
option(ENABLE_DOC "" OFF)
option(ENABLE_SERVER "" OFF)
option(ENABLE_KEYBOARD "" OFF)
option(USE_SYSTEMD "" OFF)
option(ENABLE_XDGAUTOSTART "" OFF)
option(ENABLE_EMOJI "" OFF)
option(ENABLE_LIBUUID "" OFF)
add_subdirectory(fcitx5)

add_subdirectory(androidfrontend)

option(BOOST_DISABLE_TESTS "" ON)
# you may put boost source here (./boost_1_71_0) to avoid download it every time
#set(FETCHCONTENT_SOURCE_DIR_BOOST ${CMAKE_CURRENT_SOURCE_DIR}/boost_1_71_0)
add_subdirectory(boost-cmake)

option(ENABLE_TEST "" OFF)
set(_Fcitx5Macro_SELF_DIR ${CMAKE_CURRENT_SOURCE_DIR}/fcitx5/src/lib/fcitx-utils)
add_subdirectory(libime)

option(BUILD_CURL_EXE "" OFF)
option(BUILD_TESTING "" OFF)
set(CURL_DISABLE_TESTS ON)
set(HTTP_ONLY ON)
option(CMAKE_USE_LIBSSH2 "" OFF)
option(CURL_DISABLE_COOKIES "" ON)
option(CURL_DISABLE_CRYPTO_AUTH "" ON)
option(CMAKE_USE_OPENSSL "" OFF)
option(CURL_DISABLE_OPENSSL_AUTO_LOAD_CONFIG "" ON)
option(ENABLE_UNIX_SOCKETS "" OFF)
add_subdirectory(curl)
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/curl/include)
add_library(PkgConfig::Curl ALIAS libcurl)

option(ENABLE_TEST "" OFF)
option(ENABLE_OPENCC "" OFF)
option(ENABLE_GUI "" OFF)
option(ENABLE_BROWSER "" OFF)
option(USE_WEBKIT "" OFF)
add_subdirectory(fcitx5-chinese-addons)

add_library(native-lib SHARED native-lib.cpp)
find_library(Libc c)
find_library(AndroidLog log)
target_link_libraries(native-lib ${Libc} ${AndroidLog} Fcitx5::Core)
